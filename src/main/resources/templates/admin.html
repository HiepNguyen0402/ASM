<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/style/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js" ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
</head>
<body ng-app="myApp" ng-controller="myCtrl">
    <!-- Header -->
    <div class="header" ng-include="'general/header.html'"></div>
    <div>
        <form style="width: 500px; margin-left: 30%;"  name="product">
            <div class="form-group">
                <label for="">Tên sản phẩm :</label>
                <input type="text" ng-model="product.Name" class="form-control" name="name" required>
                <span class="text-danger" ng-show="product.name.$invalid">Vui lòng nhập tên sản phẩm</span>
            </div>
            <div class="form-group">
                <label for="">Giá :</label>
                <input type="number" ng-model="product.Price" class="form-control" min="0" Name="price" required>
                <span class="text-danger" ng-show="product.price.$invalid">Vui lòng nhập giá sản phẩm</span>
            </div>
            <div class="form-group">
                <label for="">Link ảnh</label>
                <input type="text" ng-model="product.image" class="form-control" Name="anh" required>
                <span class="text-danger" ng-show="product.anh.$invalid">Vui lòng nhập link ảnh sản phẩm</span>
            </div>
            <hr>
            <div class="form-group">
                <button ng-click="insert()" ng-show="index== -1" class="btn btn-danger">Thêm</button>
                <button ng-click="update()" ng-hide="index== -1" class="btn btn-danger">Sửa</button>
                <button ng-click="delete()" ng-hide="index== -1" class="btn btn-danger">Xóa</button>
                <button ng-click="cancel()" class="btn btn-danger">Hủy</button>
                <button ng-click="clear()" class="btn btn-danger">Mới</button>
            </div>
        </form>
        <table class="table table-striped" >
            <thead>
                <tr>
                    <th>Tên sản phẩm</th>
                    <th>Giá</th>
                    <th>Ảnh</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="p in products">
                    <td>{{p.Name}}</td>
                    <td>{{p.Price}}</td>
                    <td> <img src="{{p.image}}" alt=""></td>
                    <td><a href="#" ng-click="edit($index)">Sửa</a></td>
                </tr>
            </tbody>
        </table>
    </div>
    <hr>
    
    <!-- Footer -->
    <div class="container footer text-center" ng-include="'general/footer.html'"></div>
    
    <script>
      var app = angular.module('myApp',["ngRoute"]);
      app.config(function ($routeProvider) {
                $routeProvider
                .when("/64",{
                    templateUrl: "general/64.html"
                })
                .when("/128",{
                    templateUrl: "general/128.html"
                })
                .when("/256",{
                    templateUrl: "general/256.html"
                })
                .when("/tim",{
                    templateUrl: "general/tim.html"
                })
                .when("/trang",{
                    templateUrl: "general/64.html"
                })
                .when("/vang",{
                    templateUrl: "general/vang.html"
                })
                .when("/den",{
                    templateUrl: "general/64.html"
                })
                .when("/do",{
                    templateUrl: "general/do.html"
                })
                .otherwise({
                    redirectTo: "/64"
                })
            })
            app.run(function ($rootScope) {
                $rootScope.$on('$routeChangeStart',function () {
                    $rootScope.loading = true
                })
                $rootScope.$on('$routeChangeSuccess',function () {
                    $rootScope.loading = false
                })
                $rootScope.$on('$routeChangeError',function () {
                    $rootScope.loading = false
                    alert("Lỗi, Không tải được tameplate")
                })
            })
            app.controller('myCtrl', function ($scope) {
                $scope.product = {

                }
                $scope.index = -1;
                $scope.clear = function () {
                    $scope.product = {};
                    $scope.index = -1;
                }
                $scope.insert = function () {
                    
                        $scope.products.push(angular.copy($scope.product));
                        $scope.clear();
                    
                    
                }
                $scope.update = function () {
                        $scope.products[$scope.index] = angular.copy($scope.product);
                    }
                
                $scope.delete = function () {
                    $scope.products.splice($scope.index,1);
                    $scope.clear();
                }   
                $scope.cancel = function () {
                    if($scope.index== -1){
                        $scope.clear();
                    }else{
                        $scope.edit($scope.index);
                    }
                }
                $scope.edit = function (index) {
                    $scope.index = index;
                    $scope.product = angular.copy($scope.products[index]);
                }
            $scope.products = [
              {
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              },{
                Name: "Iphone 11",
                image: "https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/220x175/9df78eab33525d08d6e5fb8d27136e95/p/h/photo_2020-10-13_22-12-24.jpg_1_2.png",
                Price: 15000000
              }
              
            ]
          });
          
    </script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>